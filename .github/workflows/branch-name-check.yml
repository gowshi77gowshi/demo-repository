name: Enforce Branch Naming Convention

on:
  create:
    branches:
      - '**'  # Trigger on any branch creation

jobs:
  validate-branch-name:
    runs-on: ubuntu-latest
    steps:
      - name: Validate Branch Naming
        env:
          BRANCH_NAME: ${{ github.ref_name }}
        run: |
          echo "Checking branch name: $BRANCH_NAME"
          if [[ ! "$BRANCH_NAME" =~ ^feature/MKT-[0-9]+$ ]]; then
            echo "Branch name does not match the required pattern 'feature/MKT-<story_number>'"
            exit 1
          else
            echo "Branch name is valid: $BRANCH_NAME"
          fi
